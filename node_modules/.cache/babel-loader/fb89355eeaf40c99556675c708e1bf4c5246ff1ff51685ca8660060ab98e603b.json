{"ast":null,"code":"export default {\n  name: 'GrainPyramid',\n  data() {\n    return {\n      years: ['2024', '2023', '2022', '2021'],\n      dataMap: {\n        '2024': {\n          grain: 61.59,\n          beans: 9.62,\n          potato: 28.80\n        },\n        '2023': {\n          grain: 61.67,\n          beans: 9.58,\n          potato: 28.75\n        },\n        '2022': {\n          grain: 61.91,\n          beans: 9.36,\n          potato: 28.73\n        },\n        '2021': {\n          grain: 62.37,\n          beans: 8.65,\n          potato: 28.98\n        }\n      }\n    };\n  },\n  methods: {\n    getSegmentStyle(year, type) {\n      // 计算金字塔段的宽度和背景色\n      const data = this.dataMap[year];\n      let widthPercent = 0;\n      let bgColor = '';\n      switch (type) {\n        case 'grain':\n          widthPercent = 100; // 谷物占据底部全宽\n          bgColor = '#4cd5ce';\n          break;\n        case 'beans':\n          // 豆类宽度 = (豆类 + 折粮薯类) / 总和 * 100\n          widthPercent = (data.beans + data.potato) / (data.grain + data.beans + data.potato) * 100;\n          bgColor = '#f9c74f';\n          break;\n        case 'potato':\n          // 折粮薯类宽度 = 折粮薯类 / 总和 * 100\n          widthPercent = data.potato / (data.grain + data.beans + data.potato) * 100;\n          bgColor = '#90be6d';\n          break;\n      }\n\n      // 返回样式对象\n      return {\n        width: `${widthPercent}%`,\n        backgroundColor: bgColor\n      };\n    }\n  }\n};","map":{"version":3,"names":["name","data","years","dataMap","grain","beans","potato","methods","getSegmentStyle","year","type","widthPercent","bgColor","width","backgroundColor"],"sources":["src/components/charts/GrainPyramid.vue"],"sourcesContent":["<template>\r\n  <div class=\"pyramid-container\">\r\n    <div class=\"chart-title\">粮食作物面积占比金字塔</div>\r\n    <div class=\"pyramids-grid\">\r\n      <div class=\"pyramid-wrapper\" v-for=\"year in years\" :key=\"year\">\r\n        <div class=\"year-title\">{{ year }}年</div>\r\n        <div class=\"pyramid\">\r\n          <!-- 折粮薯类 - 顶部 -->\r\n          <div class=\"pyramid-segment potato\" :style=\"getSegmentStyle(year, 'potato')\">\r\n            <div class=\"segment-label\">折粮薯类</div>\r\n            <div class=\"segment-value\">{{ dataMap[year].potato }}%</div>\r\n          </div>\r\n          <!-- 豆类 - 中部 -->\r\n          <div class=\"pyramid-segment beans\" :style=\"getSegmentStyle(year, 'beans')\">\r\n            <div class=\"segment-label\">豆类</div>\r\n            <div class=\"segment-value\">{{ dataMap[year].beans }}%</div>\r\n          </div>\r\n          <!-- 谷物 - 底部 -->\r\n          <div class=\"pyramid-segment grain\" :style=\"getSegmentStyle(year, 'grain')\">\r\n            <div class=\"segment-label\">谷物</div>\r\n            <div class=\"segment-value\">{{ dataMap[year].grain }}%</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GrainPyramid',\r\n  data() {\r\n    return {\r\n      years: ['2024', '2023', '2022', '2021'],\r\n      dataMap: {\r\n        '2024': { grain: 61.59, beans: 9.62, potato: 28.80 },\r\n        '2023': { grain: 61.67, beans: 9.58, potato: 28.75 },\r\n        '2022': { grain: 61.91, beans: 9.36, potato: 28.73 },\r\n        '2021': { grain: 62.37, beans: 8.65, potato: 28.98 }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getSegmentStyle(year, type) {\r\n      // 计算金字塔段的宽度和背景色\r\n      const data = this.dataMap[year];\r\n      let widthPercent = 0;\r\n      let bgColor = '';\r\n      \r\n      switch(type) {\r\n        case 'grain':\r\n          widthPercent = 100; // 谷物占据底部全宽\r\n          bgColor = '#4cd5ce';\r\n          break;\r\n        case 'beans':\r\n          // 豆类宽度 = (豆类 + 折粮薯类) / 总和 * 100\r\n          widthPercent = ((data.beans + data.potato) / (data.grain + data.beans + data.potato)) * 100;\r\n          bgColor = '#f9c74f';\r\n          break;\r\n        case 'potato':\r\n          // 折粮薯类宽度 = 折粮薯类 / 总和 * 100\r\n          widthPercent = (data.potato / (data.grain + data.beans + data.potato)) * 100;\r\n          bgColor = '#90be6d';\r\n          break;\r\n      }\r\n      \r\n      // 返回样式对象\r\n      return {\r\n        width: `${widthPercent}%`,\r\n        backgroundColor: bgColor\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.pyramid-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 5px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.chart-title {\r\n  text-align: center;\r\n  color: #fff;\r\n  font-size: 14px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.pyramids-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  grid-template-rows: repeat(2, 1fr);\r\n  gap: 15px;\r\n  flex: 1;\r\n}\r\n\r\n.pyramid-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.year-title {\r\n  color: #fff;\r\n  font-size: 13px;\r\n  margin-bottom: 8px;\r\n  font-weight: bold;\r\n}\r\n\r\n.pyramid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 100%;\r\n  flex: 1;\r\n}\r\n\r\n.pyramid-segment {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 33%;\r\n  margin-bottom: 2px;\r\n  border-radius: 3px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  color: #fff;\r\n  text-align: center;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.pyramid-segment:hover {\r\n  transform: translateY(-2px);\r\n  filter: brightness(1.2);\r\n}\r\n\r\n.segment-label {\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  margin-right: 6px;\r\n}\r\n\r\n.segment-value {\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n}\r\n\r\n.grain {\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.beans {\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.potato {\r\n  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* 响应式调整 */\r\n@media screen and (max-width: 1200px) {\r\n  .segment-label, .segment-value {\r\n    font-size: 11px;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 768px) {\r\n  .pyramids-grid {\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: repeat(4, 1fr);\r\n    gap: 10px;\r\n  }\r\n  \r\n  .year-title {\r\n    font-size: 12px;\r\n    margin-bottom: 5px;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 480px) {\r\n  .segment-label {\r\n    font-size: 10px;\r\n  }\r\n  \r\n  .segment-value {\r\n    font-size: 10px;\r\n  }\r\n  \r\n  .pyramids-grid {\r\n    gap: 5px;\r\n  }\r\n}\r\n</style> "],"mappings":"AA6BA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,OAAA;QACA;UAAAC,KAAA;UAAAC,KAAA;UAAAC,MAAA;QAAA;QACA;UAAAF,KAAA;UAAAC,KAAA;UAAAC,MAAA;QAAA;QACA;UAAAF,KAAA;UAAAC,KAAA;UAAAC,MAAA;QAAA;QACA;UAAAF,KAAA;UAAAC,KAAA;UAAAC,MAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,gBAAAC,IAAA,EAAAC,IAAA;MACA;MACA,MAAAT,IAAA,QAAAE,OAAA,CAAAM,IAAA;MACA,IAAAE,YAAA;MACA,IAAAC,OAAA;MAEA,QAAAF,IAAA;QACA;UACAC,YAAA;UACAC,OAAA;UACA;QACA;UACA;UACAD,YAAA,IAAAV,IAAA,CAAAI,KAAA,GAAAJ,IAAA,CAAAK,MAAA,KAAAL,IAAA,CAAAG,KAAA,GAAAH,IAAA,CAAAI,KAAA,GAAAJ,IAAA,CAAAK,MAAA;UACAM,OAAA;UACA;QACA;UACA;UACAD,YAAA,GAAAV,IAAA,CAAAK,MAAA,IAAAL,IAAA,CAAAG,KAAA,GAAAH,IAAA,CAAAI,KAAA,GAAAJ,IAAA,CAAAK,MAAA;UACAM,OAAA;UACA;MACA;;MAEA;MACA;QACAC,KAAA,KAAAF,YAAA;QACAG,eAAA,EAAAF;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}